<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="NcoVAppUpdate.ContactTracing"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:busyindicator="clr-namespace:Syncfusion.SfBusyIndicator.XForms;assembly=Syncfusion.SfBusyIndicator.XForms"
             xmlns:controls="clr-namespace:Xam.Plugin.SimpleBottomDrawer;assembly=Xam.Plugin.SimpleBottomDrawer"
             xmlns:d="http://xamarin.com/schemas/2014/forms/design"
             xmlns:extensions="http://xamarin.com/schemas/2020/toolkit"
             xmlns:local="clr-namespace:NcoVAppUpdate"
             xmlns:maps="clr-namespace:Xamarin.Forms.Maps;assembly=Xamarin.Forms.Maps"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             x:DataType="local:ContactTracingMainVM"
             Shell.NavBarIsVisible="True"
             Visual="Material"
             mc:Ignorable="d">
    <ContentPage.BindingContext>
        <local:ContactTracingMainVM />
    </ContentPage.BindingContext>

    <ContentPage.Content>
        <RelativeLayout>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <maps:Map x:Name="mapCONTACTTRACING"
                          Grid.Row="0"
                          Grid.RowSpan="2"
                          HasScrollEnabled="True"
                          HasZoomEnabled="True"
                          HeightRequest="700"
                          HorizontalOptions="FillAndExpand"
                          IsShowingUser="True"
                          MapType="Street"
                          VerticalOptions="FillAndExpand"
                          WidthRequest="425">
                    <x:Arguments>
                        <maps:MapSpan>
                            <x:Arguments>
                                <maps:Position>
                                    <x:Arguments>
                                        <x:Double>12.8797</x:Double>
                                        <x:Double>121.7740</x:Double>
                                    </x:Arguments>
                                </maps:Position>
                                <x:Double>10</x:Double>
                                <x:Double>10</x:Double>
                            </x:Arguments>
                        </maps:MapSpan>
                    </x:Arguments>
                </maps:Map>

                <busyindicator:SfBusyIndicator x:Name="busyINDICATOR"
                                               Title="Fetching data.."
                                               Grid.Row="0"
                                               Grid.RowSpan="2"
                                               AnimationType="Ball"
                                               EnableAnimation="True"
                                               HorizontalOptions="Center"
                                               IsBusy="False"
                                               VerticalOptions="Center"
                                               ViewBoxHeight="150"
                                               ViewBoxWidth="150"
                                               Duration=".25" />
                <StackLayout Grid.Row="1"
                             Margin="10,0,0,50"
                             HorizontalOptions="Start"
                             Spacing="10"
                             VerticalOptions="End">
                    <Button Clicked="Button_Clicked"
                            HorizontalOptions="Start"
                            Text="More information"
                            TextColor="White"
                            VerticalOptions="End" />

                    <Button BackgroundColor="#C95650"
                            Clicked="Button_Clicked_1"
                            HorizontalOptions="Start"
                            ImageSource="steth.png"
                            Text="Self report"
                            TextColor="White"
                            VerticalOptions="Center" />
                </StackLayout>
            </Grid>

            <controls:BottomDrawer x:Name="bottomSheet"
                                   Padding="0"
                                   BackgroundColor="White"
                                   CornerRadius="20"
                                   HasShadow="True"
                                   IsVisible="false"
                                   RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent,
                                                                                          Property=Height,
                                                                                          Factor=1,
                                                                                          Constant=0}"
                                   RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent,
                                                                                         Property=Width,
                                                                                         Factor=1,
                                                                                         Constant=0}"
                                   RelativeLayout.YConstraint="{ConstraintExpression Type=RelativeToParent,
                                                                                     Property=Height,
                                                                                     Factor=.95,
                                                                                     Constant=0}">
                <StackLayout>
                    <BoxView Margin="20,16,20,-5"
                             BackgroundColor="DimGray"
                             CornerRadius="2"
                             HeightRequest="3"
                             HorizontalOptions="Center"
                             WidthRequest="100" />
                    <ScrollView HeightRequest="1300">
                        <StackLayout HeightRequest="1300">
                            <Label x:Name="labelTEST"
                                   Margin="10,10,10,0"
                                   FontFamily="Regular"
                                   FontSize="35"
                                   Text="Filter cases by region:"
                                   TextColor="Black" />

                            <Picker x:Name="pckrREGION"
                                    Title="Region">
                                <Picker.ItemsSource>
                                    <x:Array Type="{x:Type x:String}">
                                        <x:String>Ilocos Region</x:String>
                                        <x:String>Cordillera Administrative Region</x:String>
                                        <x:String>Region II</x:String>
                                        <x:String>Region III</x:String>
                                        <x:String>National Capital Region</x:String>
                                        <x:String>CALABARZON</x:String>
                                        <x:String>Region V</x:String>
                                        <x:String>MIMAROPA</x:String>
                                        <x:String>Region VI</x:String>
                                        <x:String>Region VII</x:String>
                                        <x:String>Region VIII</x:String>
                                        <x:String>Region IX</x:String>
                                        <x:String>Region X</x:String>
                                        <x:String>Region XI</x:String>
                                        <x:String>Region XII</x:String>
                                        <x:String>Region XIII</x:String>
                                        <x:String>Bangsamoro Autonomous Region in Muslim Mindanao</x:String>
                                    </x:Array>
                                </Picker.ItemsSource>
                            </Picker>

                            <StackLayout HorizontalOptions="End"
                                         Orientation="Horizontal">
                                <Button x:Name="btnSEARCH"
                                        Margin="10,0,10,0"
                                        Clicked="btnSEARCH_Clicked"
                                        HorizontalOptions="Center"
                                        ImageSource="search.png"
                                        Text="Search" />

                                <Button x:Name="btnSHOWALL"
                                        Margin="10,0,10,0"
                                        Clicked="btnSHOWALL_Clicked"
                                        HorizontalOptions="Center"
                                        Text="Show&#10;all" />
                            </StackLayout>

                            <Button x:Name="BtnRemoveRegionalPins"
                                    Margin="10,5,10,0"
                                    BackgroundColor="Red"
                                    Clicked="BtnRemoveRegionalPins_Clicked"
                                    HorizontalOptions="Fill"
                                    Text="Remove regional pins" />

                            <Label Margin="10,10,10,0"
                                   FontAttributes="Italic"
                                   FontSize="20"
                                   Text="Note: Application may seem hanging due to huge amount data of data to process. Please wait."
                                   TextColor="Gray" />
                        </StackLayout>
                    </ScrollView>
                </StackLayout>
            </controls:BottomDrawer>

            <controls:BottomDrawer x:Name="bottomSheetSELFREPORT"
                                   Padding="0"
                                   BackgroundColor="White"
                                   CornerRadius="20"
                                   HasShadow="True"
                                   IsVisible="false"
                                   RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent,
                                                                                          Property=Height,
                                                                                          Factor=1,
                                                                                          Constant=0}"
                                   RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent,
                                                                                         Property=Width,
                                                                                         Factor=1,
                                                                                         Constant=0}"
                                   RelativeLayout.YConstraint="{ConstraintExpression Type=RelativeToParent,
                                                                                     Property=Height,
                                                                                     Factor=.95,
                                                                                     Constant=0}">

                <StackLayout>
                    <BoxView Margin="20,16,20,-5"
                             BackgroundColor="DimGray"
                             CornerRadius="2"
                             HeightRequest="3"
                             HorizontalOptions="Center"
                             WidthRequest="100" />

                    <ScrollView>
                        <StackLayout HeightRequest="1900">
                            <Label Margin="10,10,10,0"
                                   FontFamily="Bold"
                                   FontSize="40"
                                   HorizontalOptions="Start"
                                   Text="Self Report"
                                   TextColor="Black" />

                            <Label Margin="10,5,0,0"
                                   FontSize="20"
                                   Text="When you report, you help others, save lives&#10;and end the COVID - 19 pandemic sooner." />

                            <extensions:Expander Margin="10,20,10,0"
                                                 CollapseAnimationEasing="{x:Static Easing.CubicInOut}"
                                                 CollapseAnimationLength="500"
                                                 ExpandAnimationEasing="{x:Static Easing.CubicInOut}"
                                                 ExpandAnimationLength="500"
                                                 IsExpanded="True">
                                <extensions:Expander.Header>
                                    <Grid>
                                        <Label FontSize="35"
                                               Text="Official Testing"
                                               TextColor="Black" />
                                        <Image HeightRequest="50"
                                               HorizontalOptions="End"
                                               Source="expand.png"
                                               VerticalOptions="Start">
                                            <Image.Triggers>
                                                <DataTrigger Binding="{Binding Source={RelativeSource AncestorType={x:Type extensions:Expander}}, Path=IsExpanded}"
                                                             TargetType="Image"
                                                             Value="True">
                                                    <Setter Property="Source" Value="collapse.png" />
                                                </DataTrigger>
                                            </Image.Triggers>
                                        </Image>
                                    </Grid>
                                </extensions:Expander.Header>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="5" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <BoxView Grid.Column="0"
                                             BackgroundColor="LightGray" />

                                    <StackLayout Grid.Column="1"
                                                 Margin="10,10,5,0">

                                        <Label FontSize="25"
                                               Text="Have you been tested for COVID - 19?" />

                                        <!--<RadioButton Command="{Binding RDPositive}"
                                                     FontSize="20"
                                                     Text="Tested positive"
                                                     TextColor="Black" />

                                        <RadioButton Command="{Binding RDPending}"
                                                     FontSize="20"
                                                     Text="Pending"
                                                     TextColor="Black" />

                                        <RadioButton Command="{Binding RDPUI}"
                                                     FontSize="20"
                                                     Text="Person under investigation (PUI)"
                                                     TextColor="Black" />

                                        <RadioButton Command="{Binding RDPUM}"
                                                     FontSize="20"
                                                     Text="Perosn under monitoring (PUM)"
                                                     TextColor="Black" />-->

                                        <Label Margin="10,0,10,0"
                                               FontAttributes="Italic"
                                               FontSize="20"
                                               Text="Note: PUI: is a person that has symptoms that test results doesn't out currently.&#10;&#10;PUIs can also be a person that travelled in places that has COVID19 outbreak&#10;&#10;PUM: is a person that came around with PUIs" />

                                        <StackLayout Margin="10,10,0,0"
                                                     Orientation="Horizontal">
                                            <Button Command="{Binding OpenSymptomsExpander}"
                                                    Text="Continue" />
                                            <Button Command="{Binding HideSymptomsExpander}"
                                                    Text="Cancel" />
                                        </StackLayout>

                                        <extensions:Expander Margin="0,10,10,0"
                                                             CollapseAnimationEasing="{x:Static Easing.CubicInOut}"
                                                             CollapseAnimationLength="500"
                                                             ExpandAnimationEasing="{x:Static Easing.CubicInOut}"
                                                             ExpandAnimationLength="500"
                                                             HeightRequest="1000"
                                                             IsExpanded="{Binding SymptomsExpanderVisible, Mode=TwoWay}">
                                            <extensions:Expander.Header>
                                                <Grid>
                                                    <Label FontSize="35"
                                                           Text="Symptoms"
                                                           TextColor="Black" />
                                                    <Image HeightRequest="50"
                                                           HorizontalOptions="End"
                                                           Source="expand.png"
                                                           VerticalOptions="Start">
                                                        <Image.Triggers>
                                                            <DataTrigger Binding="{Binding Source={RelativeSource AncestorType={x:Type extensions:Expander}}, Path=IsExpanded}"
                                                                         TargetType="Image"
                                                                         Value="True">
                                                                <Setter Property="Source" Value="collapse.png" />
                                                            </DataTrigger>
                                                        </Image.Triggers>
                                                    </Image>
                                                </Grid>
                                            </extensions:Expander.Header>
                                            <StackLayout Grid.Column="1">

                                                <StackLayout Orientation="Horizontal">
                                                    <CheckBox IsChecked="{Binding Fever}"
                                                              Color="#C95650" />
                                                    <Label FontSize="25"
                                                           Text="Fever"
                                                           TextColor="Black"
                                                           VerticalOptions="Center" />
                                                </StackLayout>

                                                <StackLayout Orientation="Horizontal">
                                                    <CheckBox IsChecked="{Binding DryCough}"
                                                              Color="#C95650" />
                                                    <Label FontSize="25"
                                                           Text="Dry cough"
                                                           TextColor="Black"
                                                           VerticalOptions="Center" />
                                                </StackLayout>

                                                <StackLayout Orientation="Horizontal">
                                                    <CheckBox IsChecked="{Binding Tiredness}"
                                                              Color="#C95650" />
                                                    <Label FontSize="25"
                                                           Text="Tiredness"
                                                           TextColor="Black"
                                                           VerticalOptions="Center" />
                                                </StackLayout>

                                                <StackLayout Orientation="Horizontal">
                                                    <CheckBox IsChecked="{Binding SoreThroat}"
                                                              Color="#C95650" />
                                                    <Label FontSize="25"
                                                           Text="Sore throat"
                                                           TextColor="Black"
                                                           VerticalOptions="Center" />
                                                </StackLayout>

                                                <StackLayout Orientation="Horizontal">
                                                    <CheckBox IsChecked="{Binding DifficultyBreathing}"
                                                              Color="#C95650" />
                                                    <Label FontSize="25"
                                                           Text="Difficulty in breathing"
                                                           TextColor="Black"
                                                           VerticalOptions="Center" />
                                                </StackLayout>

                                                <Entry Placeholder="Enter address line 1 (number and street)"
                                                       Text="{Binding AddressLine1}" />

                                                <Entry Placeholder="Enter location's barangay"
                                                       Text="{Binding Barangay}" />

                                                <Entry Placeholder="Enter location's municipality"
                                                       Text="{Binding Municipality}" />


                                                <StackLayout Margin="10,20,0,0"
                                                             HorizontalOptions="Fill"
                                                             Orientation="Horizontal">
                                                    <Button x:Name="btnSUBMITPROOF"
                                                            Command="{Binding GetProof}"
                                                            HorizontalOptions="Start"
                                                            Text="Submit photo of proof"
                                                            TextColor="White" />

                                                    <Button x:Name="btnSUBMITLOC"
                                                            Command="{Binding SendProof}"
                                                            HorizontalOptions="End"
                                                            Text="Submit report"
                                                            TextColor="White" />
                                                </StackLayout>
                                                <Label FontAttributes="Italic"
                                                       FontSize="20"
                                                       Text="Note: Your data will be sent to Lumaque, Jhericoh, the developer of this application and will only include the test result, symptoms, and location.                                                                                                                &#10;&#10;The address provided will be used to put pins in the map and will only include the test result and symptoms. Your anonymity is guaranteed.                                                        Thanks you for your trust and your cooperation! Together, we will beat this pandemic.                                                                                                                &#10;&#10;Kepp safe, have a good day and follow DOH and IATF's health protocol.                                                                                                               &#10;&#10;Contact number: 09063638313                                                        &#10;Facebook: Echo Lumaque" />

                                                <Button x:Name="BtnPatients"
                                                        Clicked="BtnPatients_Clicked"
                                                        Text="Show Patients" />

                                                <Button x:Name="BtnRemovePatients"
                                                        Clicked="BtnRemovePatients_Clicked"
                                                        Text="Remove Patients' Pins" />
                                            </StackLayout>
                                        </extensions:Expander>
                                    </StackLayout>
                                </Grid>
                            </extensions:Expander>
                        </StackLayout>
                    </ScrollView>
                </StackLayout>
            </controls:BottomDrawer>
            <!--  self report  -->
        </RelativeLayout>
    </ContentPage.Content>
</ContentPage>